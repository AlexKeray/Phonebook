USE PHONEBOOK
GO

DECLARE @VAR_PHONE_TYPE NCHAR(32);

SET @VAR_PHONE_TYPE = N'Служебен'

IF EXISTS (
SELECT *
FROM PHONE_TYPES
WHERE PHONE_TYPE = @VAR_PHONE_TYPE
)
	PRINT N'Phone type is not unique'

BEGIN TRY
BEGIN TRANSACTION

INSERT INTO PHONE_TYPES(
	[UPDATE_COUNTER],
	[PHONE_TYPE]
)
	VALUES(
		0, 
		@VAR_PHONE_TYPE
	)

	COMMIT TRANSACTION
END TRY
BEGIN CATCH
	PRINT ERROR_MESSAGE()
	ROLLBACK TRANSACTION
END CATCH
GO